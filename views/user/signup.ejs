<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sign Up - ZNEAKZ</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    .signup-wrapper {
      max-width: 85%;
      margin: 40px auto;
      padding: 40px;
      background-color: #fff;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
      border-radius: 10px;
    }

    .signup-image {
      width: 100%;
      height: auto;
      border-radius: 10px;
    }

    .form-section {
      padding: 20px 40px;
    }

    .form-control,
    .btn {
      border-radius: 0;
    }

    .error-message {
      color: red;
      font-size: 0.9em;
      margin-top: 4px;
    }
  </style>
</head>

<body>

  <div class="signup-wrapper container-fluid">
    <div class="row align-items-center">
      <div class="col-lg-6 mb-4 mb-lg-0 text-center">
        <img src="/admin-assets/signup-ill.jpg" alt="Sign Up Illustration" class="signup-image" />
      </div>

      <div class="col-lg-6 form-section">
        <h3>Create an account</h3>
        <p class="text-muted">Enter your details below</p>

        <form id="signform" action="/signup" method="POST">
          <div class="mb-3">
            <input type="text" class="form-control" name="name" placeholder="Name">
            <div id="error1" class="error-message"></div>
          </div>
          <div class="mb-3">
            <input type="email" class="form-control" name="email" placeholder="Email">
            <div id="error2" class="error-message"></div>
          </div>
          <div class="mb-3">
            <input type="password" class="form-control" name="password" placeholder="Password">
            <div id="error3" class="error-message"></div>
          </div>
          <div class="mb-3">
            <input type="password" class="form-control" name="cPassword" placeholder="Confirm Password">
            <div id="error4" class="error-message"></div>
          </div>

          <% if (locals.message && message.length > 0) { %>
            <div class="alert alert-danger text-center">
              <%= message %>
            </div>
          <% } %>

          <button type="submit" class="btn btn-danger w-100 mb-3">Create Account</button>

          <a href="/auth/google" class="btn btn-outline-secondary w-100 mb-3">
            <i class="bi bi-google me-2"></i> Sign up with Google
          </a>
        </form>

        <p class="text-muted text-center">Already have an account? <a href="/login">Log in</a></p>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.getElementById("signform").addEventListener("submit", function (e) {
    document.getElementById("error1").textContent = "";
    document.getElementById("error2").textContent = "";
    document.getElementById("error3").textContent = "";
    document.getElementById("error4").textContent = "";

    let valid = true;

    const name = document.getElementsByName("name")[0].value.trim();
    const email = document.getElementsByName("email")[0].value.trim();
    const password = document.getElementsByName("password")[0].value;
    const cPassword = document.getElementsByName("cPassword")[0].value;

    //  Name validation
    if (name === "") {
      document.getElementById("error1").textContent = "Name is required.";
      valid = false;
    } else if (!/^[A-Za-z\s]{2,30}$/.test(name)) {
      document.getElementById("error1").textContent =
        "Enter a valid name (letters and spaces only, 2â€“30 characters).";
      valid = false;
    }

    //  Email validation
    if (email === "") {
      document.getElementById("error2").textContent = "Email is required.";
      valid = false;
    } else if (!/^\S+@\S+\.\S+$/.test(email)) {
      document.getElementById("error2").textContent =
        "Enter a valid email address.";
      valid = false;
    }

    //  Strong Password validation
    const strongPasswordRegex =
      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

    if (!strongPasswordRegex.test(password)) {
      document.getElementById("error3").textContent =
        "Password must be at least 8 characters long, include uppercase, lowercase, number, and special character.";
      valid = false;
    }

    //  Confirm password
    if (password !== cPassword) {
      document.getElementById("error4").textContent = "Passwords do not match.";
      valid = false;
    }

    if (!valid) {
      e.preventDefault();
    }
  });
</script>

</body>

</html>
