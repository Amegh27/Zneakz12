<style>
a.btn:hover {
  background-color: #111 !important;
  color: #fff !important;
  transform: scale(1.05);
}
</style>

<!-- Top Announcement Bar -->
<div class="navbar-top text-center py-2 text-white" style="background-color: #000000; font-size: 14px; letter-spacing: 0.5px;">
  Summer Sale And Free Express Delivery - OFF 50%!
  <a href="#" class="text-warning text-decoration-underline">Shop Now by ZNEAKZ</a>
</div>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-white shadow-sm">
  <div class="container">
<a class="navbar-brand" href="/" 
  style="
    font-family: 'Orbitron', sans-serif;
    font-size: 2rem;
    letter-spacing: 4px;
    color: #0f0f0f;
    text-transform: uppercase;
    font-weight: 700;
    padding-bottom: 2px;
  ">
  ZNEAKZ
</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="/men">MEN</a></li>
        <li class="nav-item"><a class="nav-link" href="/women">WOMEN</a></li>
        <li class="nav-item"><a class="nav-link" href="/kids">KIDS</a></li>
      </ul>

      <!-- Search Form -->
   <form class="d-flex align-items-center bg-white shadow-sm px-3 py-2 rounded-pill"
      action="/#productSection" method="GET"
      style="max-width: 480px; transition: all 0.3s ease; border: 1px solid #ddd;">
  
  <!-- Search input -->
  <input class="form-control border-0 shadow-none me-2"
         type="search"
         name="q"
         placeholder="Search sneakers"
         value="<%= typeof query !== 'undefined' ? query : '' %>"
         style="font-size: 0.95rem; flex: 1; background: transparent;">
  
  <!-- Sort dropdown -->
  <select class="form-select border-0 bg-transparent me-2 text-muted"
          name="sort"
          onchange="this.form.submit()"
          style="font-size: 0.9rem; width: 150px;">
    <option value="">Sort</option>
    <option value="priceAsc" <%=sort==='priceAsc' ? 'selected' : '' %>>Price: Low → High</option>
    <option value="priceDesc" <%=sort==='priceDesc' ? 'selected' : '' %>>Price: High → Low</option>
    <option value="nameAsc" <%=sort==='nameAsc' ? 'selected' : '' %>>Name: A–Z</option>
    <option value="nameDesc" <%=sort==='nameDesc' ? 'selected' : '' %>>Name: Z–A</option>
  </select>
  
  <!-- Search button -->
  <button class="btn btn-dark rounded-circle d-flex align-items-center justify-content-center"
          type="submit"
          style="width: 38px; height: 38px;">
    <i class="bi bi-search"></i>
  </button>

  <!-- Clear button -->
  <% if (typeof query !== 'undefined' && query.trim() !== '') { %>
    <a href="/" class="btn btn-outline-secondary ms-2 rounded-circle d-flex align-items-center justify-content-center"
       style="width: 38px; height: 38px;">
      <i class="bi bi-x-lg"></i>
    </a>
  <% } %>
</form>


      <!-- Wishlist + Cart -->
      <a href="#"><i class="bi bi-heart fs-5 me-3"></i></a>
      <a href="/cart" class="position-relative me-4">
        <i class="bi bi-cart fs-5"></i>
        <span id="cartCount" class="position-absolute badge rounded-pill bg-danger">0</span>
      </a>

      <!-- User Section -->
      <% if (typeof user !== 'undefined' && user) { %>
        <div class="dropdown">
          <a class="d-flex align-items-center text-decoration-none dropdown-toggle" href="#" role="button"
            id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            <span><%= user.name %></span>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
            <li><a class="dropdown-item" href="/profile">Profile</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="#" onclick="confirmLogout(event)">Logout</a></li>
          </ul>
        </div>
      <% } else { %>
        <a href="/signup" 
   class="btn btn-outline-dark me-2 fw-semibold"
   style="border-radius: 50px; padding: 8px 22px; transition: all 0.3s;">
  Sign Up
</a>
<a href="/login" 
   class="btn btn-outline-dark fw-semibold"
   style="border-radius: 50px; padding: 8px 22px; transition: all 0.3s;">
  Log In
</a>
      <% } %>
    </div>
  </div>
</nav>

<!-- SweetAlert2 Logout Script -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script>
  function confirmLogout(event) {
    event.preventDefault();
    Swal.fire({
      title: 'Are you sure?',
      text: "You will be logged out of your account.",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#6c757d',
      confirmButtonText: 'Yes, Logout',
      cancelButtonText: 'Cancel'
    }).then((result) => {
      if (result.isConfirmed) {
        window.location.href = '/logout';
      }
    });
  }
</script>
